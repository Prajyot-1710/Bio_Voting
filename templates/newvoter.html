<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>MFS100 Web Test</title>
    <style type="text/css">
        body {
            font-family: 'Segoe UI';
            background-color: #FFFFFF;
            margin: 0px 5px 5px 5px;
            padding: 0px 5px 5px 5px;
            color: #555;
            font-size: 12px;
            background-image: url(../static/images/back2.jpg);
            background-repeat: no-repeat;
        }

        .panel {
            background-color: #FFFFFF;
            -moz-user-select: none;
            background-image: none;
            border: 1px solid transparent;
            border-radius: 4px;
            margin: 12px 12px;
            padding: 6px 12px;
        }

        .btn {
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0px;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.42857;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            -moz-user-select: none;
            background-image: none;
            border: 1px solid transparent;
            border-radius: 4px;
        }

        .btn-50 {
            width: 50px;
        }

        .btn-100 {
            width: 100px;
        }

        .btn-150 {
            width: 150px;
        }

        .btn-200 {
            width: 205px;
        }

        .btn-primary {
            color: #FFF;
            background-color: #428BCA;
            border-color: #357EBD;
        }

        .btn-primary:hover {
            color: #FFF;
            background-color: #357EBD;
            border-color: #428BCA;
        }

        .form-control {
            display: block;
            width: 100%;
            height: 24px;
            padding: 3px 6px;
            font-size: 12px;
            /*line-height: 1.42857;*/
            color: #555;
            background-color: #FFF;
            background-image: none;
            border: 1px solid #bdbdbd;
            border-radius: 4px;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        }

        textarea.form-control {
            height: auto;
        }

        .text-bold {
            font-weight: bold;
        }

        .img {
            min-width: 125px;
            min-height: 155px;
            width: 125px;
            height: 155px;
            border: 1px solid #CCC;
            border-radius: 4px;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;
            background-color: #FFFFFF;
        }

        .style1 {
            font-weight: bold;
            font-size: 18px;
        }

        .style7 {
            font-size: 22
        }

        .style11 {
            font-family: Georgia, "Times New Roman", Times, serif;
            font-size: 24px;
            color: #990000;
        }

        .img1 {
            min-width: 125px;
            min-height: 155px;
            width: 125px;
            height: 155px;
            border: 1px solid #CCC;
            border-radius: 4px;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;
            background-color: #FFFFFF;
        }

        .btn1 {
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0px;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.42857;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            -moz-user-select: none;
            background-image: none;
            border: 1px solid transparent;
            border-radius: 4px;
        }

        .form-control1 {
            display: block;
            width: 100%;
            height: 24px;
            padding: 3px 6px;
            font-size: 12px;
            /*line-height: 1.42857;*/
            color: #555;
            background-color: #FFF;
            background-image: none;
            border: 1px solid #bdbdbd;
            border-radius: 4px;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        }

        .panel1 {
            background-color: #FFFFFF;
            -moz-user-select: none;
            background-image: none;
            border: 1px solid transparent;
            border-radius: 4px;
            margin: 12px 12px;
            padding: 6px 12px;
        }
    </style>

    <script src="{{ url_for('static', filename='js/jquery-1.8.2.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mfs100-9.0.2.6.js') }}"></script>
    <script language="javascript" type="text/javascript">


        var quality = 60; //(1 to 100) (recommanded minimum 55)
        var timeout = 10; // seconds (minimum=10(recommanded), maximum=60, unlimited=0 )

        function GetInfo() {


            var key = ""; //document.getElementById('txtKey').value;

            var res;
            if (key.length == 0) {
                res = GetMFS100Info();
            }
            else {
                res = GetMFS100KeyInfo(key);
            }

            if (res.httpStaus) {

                document.getElementById('txtStatus').value = "ErrorCode: " + res.data.ErrorCode + " ErrorDescription: " + res.data.ErrorDescription;


            }
            else {
                alert(res.err);
            }
            return false;
        }

        function Capture() {
            try {
                document.getElementById('txtStatus').value = "";
                document.getElementById('imgFinger').src = "data:image/bmp;base64,";
                document.getElementById('txtIsoTemplate').value = "";

                // Attempt capture
                var res = CaptureFinger(quality, timeout);
                if (res.httpStaus && res.data.ErrorCode == "0") {
                    document.getElementById('imgFinger').src = "data:image/bmp;base64," + res.data.BitmapData;
                    document.getElementById('txtIsoTemplate').value = res.data.IsoTemplate;
                    document.getElementById('txtStatus').value = "Success";
                }
                else {
                    throw "Capture failed";
                }
            }
            catch (e) {
                // Fallback to dummy
                var confirmBypass = confirm("Scanner detection failed. Use dummy fingerprint data?");
                if (confirmBypass) {
                    // Dummy template
                    var dummy = "Rk1SACAyMAAAAAC6AAABPAFiAMUAxQEAAAAoGkCSAITiAICmAHRlAEC+ALZZAECmAF1oAIDeAIVeAIBwADtrAEA4AFwVAICkACBZAEA7ARq9AEB8ALNlAEB0ALrXAECLAFvnAIC2AGPeAIDVAGVbAIDMAEXcAICgAQxQAEBxARFRAIDBAUbfAEBqAKTmAICuAMfTAEBxAMxhAECfAD5iAIBIAOOHAEDIAC9XAIBCAQCaAAAA";
                    document.getElementById('txtIsoTemplate').value = dummy;
                    document.getElementById('txtStatus').value = "Bypassed";
                    alert("Dummy fingerprint used.");
                } else {
                    alert("Capture failed: " + e);
                }
            }
            return false;
        }

        function Verify() {
            try {
                var isotemplate = document.getElementById('txtIsoTemplate').value;
                var res = VerifyFinger(isotemplate, isotemplate);

                if (res.httpStaus) {
                    if (res.data.Status) {
                        alert("Finger matched");
                    }
                    else {
                        if (res.data.ErrorCode != "0") {
                            alert(res.data.ErrorDescription);
                        }
                        else {
                            alert("Finger not matched");
                        }
                    }
                }
                else {
                    alert(res.err);
                }
            }
            catch (e) {
                alert(e);
            }
            return false;

        }

        function Match() {
            try {
                var isotemplate = document.getElementById('txtIsoTemplate').value;
                var res = MatchFinger(quality, timeout, isotemplate);

                if (res.httpStaus) {
                    if (res.data.Status) {
                        alert("Finger matched");
                    }
                    else {
                        if (res.data.ErrorCode != "0") {
                            alert(res.data.ErrorDescription);
                        }
                        else {
                            alert("Finger not matched");
                        }
                    }
                }
                else {
                    alert(res.err);
                }
            }
            catch (e) {
                alert(e);
            }
            return false;

        }

        function GetPid() {
            try {
                var isoTemplateFMR = document.getElementById('txtIsoTemplate').value;
                var isoImageFIR = document.getElementById('txtIsoImage').value;

                var Biometrics = Array(); // You can add here multiple FMR value
                Biometrics["0"] = new Biometric("FMR", isoTemplateFMR, "UNKNOWN", "", "");

                var res = GetPidData(Biometrics);
                if (res.httpStaus) {
                    if (res.data.ErrorCode != "0") {
                        alert(res.data.ErrorDescription);
                    }
                    else {
                        document.getElementById('txtPid').value = res.data.PidData.Pid
                        document.getElementById('txtSessionKey').value = res.data.PidData.Sessionkey
                        document.getElementById('txtHmac').value = res.data.PidData.Hmac
                        document.getElementById('txtCi').value = res.data.PidData.Ci
                        document.getElementById('txtPidTs').value = res.data.PidData.PidTs
                    }
                }
                else {
                    alert(res.err);
                }

            }
            catch (e) {
                alert(e);
            }
            return false;
        }
        function GetProtoPid() {
            try {
                var isoTemplateFMR = document.getElementById('txtIsoTemplate').value;
                var isoImageFIR = document.getElementById('txtIsoImage').value;

                var Biometrics = Array(); // You can add here multiple FMR value
                Biometrics["0"] = new Biometric("FMR", isoTemplateFMR, "UNKNOWN", "", "");

                var res = GetProtoPidData(Biometrics);
                if (res.httpStaus) {
                    if (res.data.ErrorCode != "0") {
                        alert(res.data.ErrorDescription);
                    }
                    else {
                        document.getElementById('txtPid').value = res.data.PidData.Pid
                        document.getElementById('txtSessionKey').value = res.data.PidData.Sessionkey
                        document.getElementById('txtHmac').value = res.data.PidData.Hmac
                        document.getElementById('txtCi').value = res.data.PidData.Ci
                        document.getElementById('txtPidTs').value = res.data.PidData.PidTs
                    }
                }
                else {
                    alert(res.err);
                }

            }
            catch (e) {
                alert(e);
            }
            return false;
        }
        function GetRbd() {
            try {
                var isoTemplateFMR = document.getElementById('txtIsoTemplate').value;
                var isoImageFIR = document.getElementById('txtIsoImage').value;

                var Biometrics = Array();
                Biometrics["0"] = new Biometric("FMR", isoTemplateFMR, "LEFT_INDEX", 2, 1);
                Biometrics["1"] = new Biometric("FMR", isoTemplateFMR, "LEFT_MIDDLE", 2, 1);
                // Here you can pass upto 10 different-different biometric object.


                var res = GetRbdData(Biometrics);
                if (res.httpStaus) {
                    if (res.data.ErrorCode != "0") {
                        alert(res.data.ErrorDescription);
                    }
                    else {
                        document.getElementById('txtPid').value = res.data.RbdData.Rbd
                        document.getElementById('txtSessionKey').value = res.data.RbdData.Sessionkey
                        document.getElementById('txtHmac').value = res.data.RbdData.Hmac
                        document.getElementById('txtCi').value = res.data.RbdData.Ci
                        document.getElementById('txtPidTs').value = res.data.RbdData.RbdTs
                    }
                }
                else {
                    alert(res.err);
                }

            }
            catch (e) {
                alert(e);
            }
            return false;
        }

        function GetProtoRbd() {
            try {
                var isoTemplateFMR = document.getElementById('txtIsoTemplate').value;
                var isoImageFIR = document.getElementById('txtIsoImage').value;

                var Biometrics = Array();
                Biometrics["0"] = new Biometric("FMR", isoTemplateFMR, "LEFT_INDEX", 2, 1);
                Biometrics["1"] = new Biometric("FMR", isoTemplateFMR, "LEFT_MIDDLE", 2, 1);
                // Here you can pass upto 10 different-different biometric object.


                var res = GetProtoRbdData(Biometrics);
                if (res.httpStaus) {
                    if (res.data.ErrorCode != "0") {
                        alert(res.data.ErrorDescription);
                    }
                    else {
                        document.getElementById('txtPid').value = res.data.RbdData.Rbd
                        document.getElementById('txtSessionKey').value = res.data.RbdData.Sessionkey
                        document.getElementById('txtHmac').value = res.data.RbdData.Hmac
                        document.getElementById('txtCi').value = res.data.RbdData.Ci
                        document.getElementById('txtPidTs').value = res.data.RbdData.RbdTs
                    }
                }
                else {
                    alert(res.err);
                }

            }
            catch (e) {
                alert(e);
            }
            return false;
        }

        function BypassScan() {
            document.getElementById('txtIsoTemplate').value = "DUMMY_TEMPLATE";
            document.getElementById('txtStatus').value = "Scan Bypassed";
            alert("Fingerprint Scan Bypassed!");
            return false;
        }
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<body>

    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p align="right" class="style11">&nbsp;</p>
    <form name="form1" method="post" action="addvoter">
        <p>&nbsp;</p>
        <table width="625" border="0" align="center">
            <tr>
                <td width="205" height="62"><span class="style11">Voter Name</span></td>
                <td width="404"><span class="style7">
                        <label>
                            <input name="votername" type="text" class="style1" id="votername" size="40" maxlength="40"
                                required pattern="[a-zA-Z\s]+">
                        </label>
                    </span></td>
            </tr>
            <tr>
                <td height="50"><span class="style11">Voter Id</span></td>
                <td><span class="style7">
                        <input name="voterid" type="text" class="style1" id="voterid" size="10" maxlength="10" required
                            pattern="[a-zA-Z0-9]+">
                    </span></td>
            </tr>
            <tr>
                <td height="68"><span class="style11">Age</span></td>
                <td><span class="style7">
                        <input name="age" type="number" class="style1" id="age" size="6" maxlength="2" min="18"
                            required>
                    </span></td>
            </tr>
            <tr>
                <td height="63"><span class="style11">Gender</span></td>
                <td><label class="style11">
                        <input name="gender" type="radio" value="Male" checked>
                        Male</label> <label>
                        <input name="gender" type="radio" value="Female">
                        <span class="style11">Female</span></label></td>
            </tr>
            <tr>
                <td height="63"><span class="style11">Area</span></td>
                <td><span class="style7">
                        <input name="area" type="text" class="style1" id="area" size="30" maxlength="30" required
                            pattern="[a-zA-Z\s]+">
                    </span></td>
            </tr>
            <tr>
                <td height="63"><span class="style11">City</span></td>
                <td><span class="style7">
                        <input name="city" type="text" class="style1" id="city" size="20" maxlength="20" required
                            pattern="[a-zA-Z]+">
                    </span></td>
            </tr>
        </table>
        <table width="440" height="204" border="0" align="center">
            <tr>
                <td width="247">&nbsp;</td>
                <td width="177" rowspan="4"><span class="img1"><img alt="Finger Image" name="imgFinger" width="145px"
                            height="188px" id="imgFinger" /></span></td>
            </tr>
            <tr>
                <td><input name="submit" type="button" class="style11" id="btnCapture" onClick="return Capture()"
                        value="Capture" />
                    <input name="bypass" type="button" class="style11" id="btnBypass" onClick="return BypassScan()"
                        value="Bypass" style="background-color: #ffcccc;" />
                </td>
            </tr>
            <tr>
                <td><span class="style1">Index Finger </span></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
        </table>
        <div class="panel1">
            <table width="100%" border="0">
                <tr>
                    <td width="220" class="style1"> Capture Status: </td>
                    <td><input name="text" type="text" class="form-control1" id="txtStatus" value="" />
                    </td>
                </tr>
                <!--<tr>
                <td>
                    NFIQ:
                </td>
                <td>
                    <input type="text" value="" id="txtNFIQ" class="form-control" />
                </td>
            </tr>-->
                <tr>
                    <td class="style1"> Finger Template </td>
                    <td><textarea name="txtIsoTemplate" class="form-control1" id="txtIsoTemplate"
                            style="width: 100%; height:50px;"> </textarea>
                    </td>
                </tr>
            </table>
        </div>
        <table width="627" height="43" border="0" align="center">
            <tr>
                <td width="155" height="39"><label>
                        <div align="center">
                            <input name="Submit" type="submit" class="style11" value="Submit">
                        </div>
                    </label></td>
                <td width="99">&nbsp;</td>
                <td width="117"><label>
                        <div align="center">
                            <input name="Submit2" type="reset" class="style11" value="Reset">
                        </div>
                    </label></td>
                <td width="117">&nbsp;</td>
                <td width="117" class="style11"><a href="/div2bak">BACK</a></td>
            </tr>
        </table>
    </form>
</body>

</html>